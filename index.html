<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Тест WebApp магазина</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f8ff; }
        input, button { padding: 10px; margin: 10px 0; width: 100%; font-size: 16px; }
    </style>
</head>
<body>
    <h1>Тест оформления заказа</h1>
    <label>Город:<br><input type="text" id="city" placeholder="Хабаровск"></label><br>
    <label>Адрес:<br><input type="text" id="address" placeholder="Улица, дом"></label><br>
    <label><input type="checkbox" id="pickup"> Самовывоз</label><br>
    <button onclick="checkout()">Оформить заказ</button>

    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        function checkout() {
            const city = document.getElementById('city').value.trim();
            const address = document.getElementById('address').value.trim();
            const pickup = document.getElementById('pickup').checked;

            const data = {
                items: [{ name: "Тестовая свеча", price: 777 }],
                city: city || "Город не указан",
                address: pickup ? "Самовывоз" : (address || "Адрес не указан")
            };

            alert("✅ Отправляем заказ:\\n" + JSON.stringify(data, null, 2));
            Telegram.WebApp.sendData(JSON.stringify(data));
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Тест WebApp</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>Оформление заказа</h1>
  <input type="text" id="city" placeholder="Город"><br>
  <input type="text" id="address" placeholder="Адрес"><br>
  <label><input type="checkbox" id="pickup"> Самовывоз</label><br><br>
  <button onclick="checkout()">Оформить заказ</button>

  <script>
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    function checkout() {
      const city = document.getElementById('city').value.trim();
      const address = document.getElementById('address').value.trim();
      const pickup = document.getElementById('pickup').checked;

      const data = {
        items: [{ name: "Тестовая свеча", price: 777 }],
        city: city || "Не указан",
        address: pickup ? "Самовывоз" : (address || "Не указан")
      };

      console.log("⏳ Данные сформированы:", data);
      alert("✅ Отправляем заказ");
      Telegram.WebApp.sendData(JSON.stringify(data));
      console.log("✅ sendData отправлен");
    }
  </script>
</body>
</html>

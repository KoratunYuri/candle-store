<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∞–≥–∞–∑–∏–Ω —Å–≤–µ—á–µ–π (—á–µ—Ä–µ–∑ fetch)</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #fff8f0; }
    h1 { color: #333; }
    input, button { margin: 10px 0; padding: 10px; width: 100%; font-size: 16px; }
  </style>
</head>
<body>
  <h1>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
  <input type="text" id="city" placeholder="–ì–æ—Ä–æ–¥" />
  <input type="text" id="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" />
  <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

  <script>
    Telegram.WebApp.ready();

    const BOT_TOKEN = '7987338974:AAFGe-sbPh3GFpnyVVv3nWgH9XQsZ2QH4t0';
    const ADMIN_ID = 319994578;

    function checkout() {
      const city = document.getElementById("city").value.trim();
      const address = document.getElementById("address").value.trim();

      const data = {
        items: [{ name: "üî• –°–≤–µ—á–∞ —á–µ—Ä–µ–∑ fetch", price: 555 }],
        city: city || "–Ω–µ —É–∫–∞–∑–∞–Ω",
        address: address || "–Ω–µ —É–∫–∞–∑–∞–Ω"
      };

      const text = `üì¶ *–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ (—á–µ—Ä–µ–∑ fetch)*\\n\\n` +
                   `üìç *–ì–æ—Ä–æ–¥:* ${data.city}\\n` +
                   `üè† *–ê–¥—Ä–µ—Å:* ${data.address}\\n` +
                   `üïØ *–¢–æ–≤–∞—Ä:* ${data.items[0].name} ‚Äî ${data.items[0].price}‚ÇΩ`;

      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: ADMIN_ID,
          text: text,
          parse_mode: "Markdown"
        })
      })
      .then(res => res.json())
      .then(res => {
        if (res.ok) {
          alert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞–ø—Ä—è–º—É—é!");
        } else {
          alert("‚ùå –û—à–∏–±–∫–∞ Telegram: " + JSON.stringify(res));
        }
      })
      .catch(err => {
        alert("üö´ –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + err.message);
      });
    }
  </script>
</body>
</html>
